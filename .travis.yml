sudo: required
services:
  - docker

before_install:
  - docker build -t brungo1995/docker-react -f Dockerfile.dev .

# commands that need to be executed to run our test suite
script: 
  # Run tests and exit terminal otherwhise hangs there waiting for input
  - docker run -e CI=true brungo1995/docker-react npm run test

  # if you set up elastic beanstalk with AWS add this set up below
# deploy:
#   provider: elasticbeanstalk
#   # choos the region where deployed your elastic beanstal region
#   region: af-south-1
#   app: "docker-react"
#   env: "Docker_env"
#   bucket_name: "bucket name automatically generated by elastic beanstalk"
#   bucket_path: "docker-react"
#   on:
#   # Only trigger the build process when deployed to the master branch
#     branch: master
#   access_key_id: "$AWS_ACCESS_KEY"
#   secret_access_key: "$AWS_SECRET_KEY"

# After all is successfull run this script to push to docker hub
after_success:
  - sh .travis/deploy_dockerhub.sh
  – test “$TRAVIS_BRANCH” = “master” && sh .travis/deploy_heroku.sh

  # If you have an HEruku account then you can deploy like this 
# deploy:
#   provider: heroku
#   api_key:
#     secure: <ENCRYPTED KEY HERE>
#   app: <your-heroku-app-name-here>
#   on:
#     repo: <your-github-user-name>/<your-github-repo-here>